<!DOCTYPE html>
<html lang="en-GB">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Our Date Night Coupon Book</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Cochin', 'Georgia', serif; -webkit-tap-highlight-color: transparent; scroll-behavior: smooth; }
        .font-display { font-family: 'Cochin', 'Georgia', serif; }
        
        .text-gradient-gold {
            background: linear-gradient(to right, #8a642a, #a57c39, #634b22, #a57c39, #8a642a);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .text-overlay-box {
            background-color: rgba(255, 241, 242, 0.88); 
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            border: 1px solid rgba(251, 207, 232, 0.5);
            border-radius: 1.5rem;
            padding: 2.5rem;
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.05);
            z-index: 20;
            position: relative;
        }

        .heart-particle {
            position: absolute;
            user-select: none;
            pointer-events: none;
            z-index: 5;
            animation: floatUp 10s linear infinite;
        }

        .heart-particle svg { fill: #ec4899; opacity: 0.4; }

        @keyframes floatUp {
            0% { transform: translateY(110vh) rotate(0deg); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(-10vh) rotate(360deg); opacity: 0; }
        }

        .firework-spark {
            position: fixed;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            pointer-events: none;
            z-index: 100;
            animation: explode 0.8s ease-out forwards;
        }

        @keyframes explode {
            0% { transform: translate(0, 0) scale(1); opacity: 1; }
            100% { transform: translate(var(--tx), var(--ty)) scale(0); opacity: 0; }
        }

        .coupon-card {
            perspective: 1000px;
            -webkit-perspective: 1000px;
            height: 400px;
            margin-bottom: 10px;
        }

        .coupon-inner {
            position: relative;
            width: 100%;
            height: 100%;
            transition: transform 0.6s;
            transform-style: preserve-3d;
            -webkit-transform-style: preserve-3d;
            cursor: pointer;
        }

        .coupon-inner.is-flipped { transform: rotateY(180deg); }

        .coupon-front, .coupon-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 1.25rem;
            padding: 2rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        .coupon-front { background-color: white; z-index: 2; }
        .coupon-back { 
            background-color: #fff1f2; 
            transform: rotateY(180deg); 
            z-index: 1; 
            border: 2px dashed #fbcfe8;
            overflow-y: auto;
        }

        .redeem-btn {
            margin-top: 1.5rem;
            padding: 0.6rem 1.5rem;
            border-radius: 9999px;
            background-color: #ec4899;
            color: white;
            font-weight: 600;
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .redeem-btn.is-redeemed { background-color: #9d174d; }
        .heart-icon { display: none; width: 14px; height: 14px; fill: currentColor; }
        .is-redeemed .heart-icon { display: block; }
        .romantic-bg { background-color: rgba(255, 241, 242, 0.5); }
    </style>
</head>
<body class="bg-slate-50">

<div id="cover-page" class="fixed inset-0 z-[100] flex items-center justify-center bg-[#fff1f2] transition-opacity duration-[2000ms] overflow-hidden">
    <div class="text-center px-6 relative z-[150]">
        <div class="mb-8">
            <img src="mallard.jpg" alt="Duck Logo" class="w-24 h-24 mx-auto rounded-full">
        </div>
        <button id="quack-button" onclick="handleQuacks()" class="px-8 py-4 bg-pink-500 hover:bg-pink-600 text-white font-display text-lg font-semibold rounded-full shadow-xl transition-all active:scale-95">
            Quack
        </button>
    </div>
</div>


      <section class="relative min-h-screen flex items-center justify-center overflow-hidden bg-pink-50" id="hero-section">
        <div class="absolute inset-0 z-0">
            <img src="https://images.unsplash.com/photo-1518199266791-5375a83190b7?auto=format&fit=crop&q=80" 
                 class="w-full h-full object-cover opacity-30" alt="Background">
            <div class="absolute inset-0 romantic-bg"></div>
        </div>

        <div class="relative z-10 text-center px-6 max-w-2xl">
            <div class="text-overlay-box">
<div class="inline-flex items-center justify-center w-24 h-24 rounded-full bg-white mb-6 overflow-hidden">
    <img src="valentine.jpg" alt="Profile" class="w-full h-full object-cover">
</div>
                <h1 class="font-display text-4xl md:text-6xl font-bold text-slate-800 mb-6 leading-tight">
                    Our <span class="text-gradient-gold block">Date Night</span> Coupon Book
                </h1>

                <p class="text-base md:text-lg text-slate-700 leading-relaxed text-center">
                    Sant Jordi remains the superior holiday, but this is the first time I get to call you my (not Saint) Valentine, so allow me to wake up craving cheese... and end up being painfully cheesy instead.
                    <br><br>
                    This is a compilation of dates we can have on a call. The in-person dates will come, but I am sure we can come up with those together :)
                    <br><br>
                    <span class="text-pink-600 font-semibold">Happy Valentine's Day, ducky!</span>
                </p>

                <div class="mt-8">
                    <a href="#coupons" onclick="glideToCoupons(event)" class="inline-flex items-center gap-2 px-8 py-3 rounded-full bg-pink-500 text-white font-semibold shadow-lg hover:bg-pink-600 transition-colors">
                        Open Your Coupons
                    </a>
                </div>
            </div>
        </div>
    </section>

    <section id="coupons" class="py-20 px-4 max-w-6xl mx-auto text-center">
        <h2 class="text-4xl font-bold text-slate-800 mb-4 font-display">Your Date Night Coupons</h2>
        <p class="text-slate-500 font-display text-xl mb-16">Tap a coupon to reveal your treat! âœ¨</p>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8" id="coupon-grid"></div>

        <footer class="mt-24 mb-6">
            <p class="font-display text-lg text-slate-600 mb-2">
                Dates Completed: <span id="redeem-count" class="font-bold text-pink-500">0</span> / <span id="total-count">0</span>
            </p>
            <p class="font-display text-2xl text-pink-400 italic">I love you Matt.</p>
        </footer>

       <div class="max-w-lg mx-auto px-4 pb-20">
    <div class="bg-pink-50/50 backdrop-blur-md border border-pink-100 rounded-2xl p-6 shadow-sm">
        <h3 class="font-display text-xl text-slate-800 mb-1">Rate the Coupon Book</h3>
        <p class="text-slate-500 text-xs mb-4 font-display italic">Disclaimer Alert: mockery will not be appreciated.</p>
        
        <div class="flex justify-center gap-4 mb-4" id="page-duck-rating">
            <button onclick="ratePage(1, event)" class="duck-btn w-12 h-12 filter grayscale opacity-40 transition-all duration-300 hover:scale-110">
                <img src="mallard.jpg" alt="Duck 1" class="w-full h-full object-contain">
            </button>
            <button onclick="ratePage(2, event)" class="duck-btn w-12 h-12 filter grayscale opacity-40 transition-all duration-300 hover:scale-110">
                <img src="mallard.jpg" alt="Duck 2" class="w-full h-full object-contain">
            </button>
            <button onclick="ratePage(3, event)" class="duck-btn w-12 h-12 filter grayscale opacity-40 transition-all duration-300 hover:scale-110">
                <img src="mallard.jpg" alt="Duck 3" class="w-full h-full object-contain">
            </button>
            <button onclick="ratePage(4, event)" class="duck-btn w-12 h-12 filter grayscale opacity-40 transition-all duration-300 hover:scale-110">
                <img src="mallard.jpg" alt="Duck 4" class="w-full h-full object-contain">
            </button>
            <button onclick="ratePage(5, event)" class="duck-btn w-12 h-12 filter grayscale opacity-40 transition-all duration-300 hover:scale-110">
                <img src="mallard.jpg" alt="Duck 5" class="w-full h-full object-contain">
            </button>
        </div>

        <textarea id="page-comment" class="w-full bg-white/80 border border-pink-100 rounded-xl p-3 text-sm focus:outline-none focus:ring-2 focus:ring-pink-200 transition-all resize-none font-display" placeholder="Leave a comment..." rows="2"></textarea>
        
        <button onclick="sendPageReview()" class="mt-4 w-full py-2 bg-pink-500 hover:bg-pink-600 text-white font-semibold rounded-full shadow-md transition-all active:scale-95 text-[10px] uppercase tracking-widest">
            Send Review
        </button>
    </div>
</div>
    </section>

    <script>

let quackCount = 0;
const QUACKS_REQUIRED = 10;
// Array to keep track of where ducks are placed
let placedDucks = []; 

function handleQuacks() {
    quackCount++;
    // We spawn 25 ducks per click, checking for overlaps
    spawnDucks(25); 

    if (quackCount >= QUACKS_REQUIRED) {
        const btn = document.getElementById('quack-button');
        btn.innerText = "Let's Go!";
        btn.onclick = null;
        dismissCover();
    }
}

function spawnDucks(amount) {
    const cover = document.getElementById('cover-page');
    const padding = 10; // Minimum pixels between ducks

    for (let i = 0; i < amount; i++) {
        const size = Math.floor(Math.random() * 60) + 40;
        let x, y, overlapping;
        let attempts = 0;
        const maxAttempts = 50; // Safety cap to prevent infinite loops

        // Try to find a non-overlapping position
        do {
            overlapping = false;
            x = Math.random() * (window.innerWidth - size);
            y = Math.random() * (window.innerHeight - size);
            attempts++;

            for (let existing of placedDucks) {
                // Calculate distance between centers of the circular ducks
                const dx = (x + size / 2) - (existing.x + existing.size / 2);
                const dy = (y + size / 2) - (existing.y + existing.size / 2);
                const distance = Math.sqrt(dx * dx + dy * dy);

                // If distance is less than the sum of radii + padding, they overlap
                if (distance < (size / 2 + existing.size / 2 + padding)) {
                    overlapping = true;
                    break;
                }
            }
        } while (overlapping && attempts < maxAttempts);

        // Save the coordinates and size for future checks
        placedDucks.push({ x, y, size });

        // Create the element
        const duck = document.createElement('img');
        duck.src = 'mallard.jpg';
        duck.className = 'absolute rounded-full';
        duck.style.width = size + 'px';
        duck.style.height = size + 'px';
        duck.style.left = x + 'px';
        duck.style.top = y + 'px';
        duck.style.transform = `rotate(${Math.random() * 360}deg)`;
        duck.style.zIndex = "110";
        
        cover.appendChild(duck);
    }
}

function dismissCover() {
    const cover = document.getElementById('cover-page');
    if (cover) {
        cover.style.opacity = '0';
        setTimeout(() => {
            cover.style.display = 'none';
        }, 2000); // The slow 2-second transition
    }
}

// Updated Heart Function to be on top of the opaque pink
function createHeart() {
    const container = document.createElement('div');
    container.classList.add('heart-particle');
    container.style.zIndex = "120"; // Above ducks, below button
    container.innerHTML = `<svg width="20" height="20" viewBox="0 0 24 24"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>`;
    container.style.left = Math.random() * 100 + "vw";
    document.body.appendChild(container);
    setTimeout(() => container.remove(), 12000);
}
setInterval(createHeart, 600);


        const YOUR_EMAIL = "paulayincarbonellgodayol@gmail.com";
        let selectedRating = 0;

        function glideToCoupons(e) {
            e.preventDefault();
            const target = document.getElementById('coupons');
            if (target) {
                const offset = 40; 
                const bodyRect = document.body.getBoundingClientRect().top;
                const elementRect = target.getBoundingClientRect().top;
                const elementPosition = elementRect - bodyRect;
                const offsetPosition = elementPosition - offset;

                window.scrollTo({
                    top: offsetPosition,
                    behavior: 'smooth'
                });
            }
        }

        function createHeart() {
            const hero = document.getElementById('hero-section');
            const container = document.createElement('div');
            container.classList.add('heart-particle');
            container.innerHTML = `<svg width="20" height="20" viewBox="0 0 24 24"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>`;
            container.style.left = Math.random() * 100 + "vw";
            hero.appendChild(container);
            setTimeout(() => container.remove(), 12000);
        }
        setInterval(createHeart, 600);

        function launchFireworks(x, y) {
            const colors = ['#ec4899', '#bf953f', '#0ea5e9', '#fce7f3'];
            for (let i = 0; i < 15; i++) {
                const spark = document.createElement('div');
                spark.className = 'firework-spark';
                spark.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                spark.style.left = x + 'px'; spark.style.top = y + 'px';
                spark.style.setProperty('--tx', `${(Math.random() - 0.5) * 200}px`);
                spark.style.setProperty('--ty', `${(Math.random() - 0.5) * 200}px`);
                document.body.appendChild(spark);
                setTimeout(() => spark.remove(), 800);
            }
        }

        window.ratePage = (rating, event) => {
            selectedRating = rating;
            document.querySelectorAll('.duck-btn').forEach((duck, i) => {
                if (i < rating) {
                    duck.classList.remove('grayscale', 'opacity-40');
                } else {
                    duck.classList.add('grayscale', 'opacity-40');
                }
            });
            launchFireworks(event.clientX, event.clientY);
        };

        window.sendPageReview = () => {
            const comment = document.getElementById('page-comment').value;
            if (selectedRating === 0) return alert("Pick a duck first! ðŸ¦†");
            window.location.href = `mailto:${YOUR_EMAIL}?subject=Coupon Book Review&body=Rating: ${selectedRating}/5 Ducks ðŸ¦†%0AComment: ${comment}`;
        };

        const coupons = [
            { title: "Movie Night", emoji: "<img src='1movienight.jpg' class='w-16 h-16 mx-auto object-contain'>", description: "Nothing better than picking a movie or TV series, pressing play at the same time, and FaceTiming (veto power reserved). Hopefully it will be in-sync this time!" },
            { title: "Cook Together", emoji: "<img src='2cooking.jpg' class='w-16 h-16 mx-auto object-contain'>", description: "Choose the same recipe, buy the ingredients, and cook together over video call. Bonus points for actually eating together at the same time, as experience has proven it hard!" },
            { title: "Photo Album", emoji: "<img src='3photoalbum.jpg' class='w-16 h-16 mx-auto object-contain'>", description: "Create an album compiling our best pictures as a keepsake of when we are together!" },
            { title: "Creative Writing", emoji: "<img src='4creativewriting.jpg' class='w-16 h-16 mx-auto object-contain'>", description: "Write a story based on a prompt found online. We each write for 2 minutes and then swap stories, making it a combination of both our ideas!" },
            { title: "Game Night", emoji: "<img src='5games.jpg' class='w-16 h-16 mx-auto object-contain'>", description: "We pick a multiplayer game and play together. I think an escape room could be fun, but am very open to finding alternatives and look forward to learning about the war strategy game!" },
            { title: "Music Night", emoji: "<img src='6music.jpg' class='w-16 h-16 mx-auto object-contain'>", description: "Go through our playlist together and add new ones to listen to when we are together. Bonus points for random picks like Dr Heckyll and Mr Jive!" },
            { title: "Virtual Museum", emoji: "<img src='7museum.jpg' class='w-16 h-16 mx-auto object-contain'>", description: "Visit a virtual museum together. I am positive the Louvre and the British Museum, among others, offer this option! We are cultural ducks." },
            { title: "Niche Pictionary", emoji: "<img src='8pictionary.jpg' class='w-16 h-16 mx-auto object-contain'>", description: "Revisit our favourite moments together while testing our lack of artistic abilities. Pending: find a medium that does not randomly rearrange our masterpieces." },
            { title: "Interior Design", emoji: "<img src='9interiordesign.jpg' class='w-16 h-16 mx-auto object-contain'>", description: "Design our dream kitchen together. Very open to moving to other rooms and deciding whether columns are a good decision for a bedroom." },
            { title: "PowerPoint Night", emoji: "<img src='10powerpoint.jpg' class='w-16 h-16 mx-auto object-contain'>", description: "Choose a random topic and make a 10-minute presentation to explain said topic to the other person. Pending: Mazes." },
            { title: "Deep Dive", emoji: "<img src='11deepdive.jpg' class='w-16 h-16 mx-auto object-contain'>", description: "Getting to know each other even further through a question-based card game. All ratings approved, of course." },
            { title: "Early Birds", emoji: "<img src='12earlybird.jpg' class='w-16 h-16 mx-auto object-contain'>", description: "Early Bird gets the Worm. Have a morning coffee date for a change and admire each other's sleepy face." },
            { title: "The Jar", emoji: "<img src='13jar.jpg' class='w-16 h-16 mx-auto object-contain'>", description: "Ask our future selves questions, write them down, and put them away for us to find and reply to on another call." },
            { title: "Speaking from Ignorance", emoji: "<img src='14ignorance.jpg' class='w-16 h-16 mx-auto object-contain'>", description: "Each of us chooses a word or concept for the other that we know they are oblivious to, and then we try to explain what it means without looking it up anywhere." },
            { title: "Tier Ranking", emoji: "<img src='15ranking.jpg' class='w-16 h-16 mx-auto object-contain'>", description: "Tier Ranking random things and seeing how much we agree to disagree during the process. Maybe we should start with banal things that we don't feel particularly strongly about." },
            { title: "Big Skin Night", emoji: "<img src='16newus.jpg' class='w-16 h-16 mx-auto object-contain'>", description: "It is make-up night! We each put on eyeliner, eyeshadow, lipgloss, moisturiser, but most of all, we wear facemasks and blackhead removers so that we feel at our prettiest and freshest." },
            { title: "Guided Tours", emoji: "<img src='17guided.jpg' class='w-16 h-16 mx-auto object-contain'>", description: "We each plan the itinerary for a future travel. Local attractions and food options included. Recommended: starting with a road trip around Catalonia and the Scottish Highlands respectively." },
            { title: "Top Secret", emoji: "<img src='18secret.jpg' class='w-16 h-16 mx-auto object-contain'>", description: "This date requires having a knack for exploration and keeping things between us." }
        ];

        const grid = document.getElementById('coupon-grid');
        const countDisplay = document.getElementById('redeem-count');
        document.getElementById('total-count').innerText = coupons.length;

        window.handleRedeem = (e, btn) => {
            e.stopPropagation();
            const label = btn.querySelector('.btn-text');
            const isRedeemed = btn.classList.toggle('is-redeemed');
            label.innerText = isRedeemed ? 'Redeemed' : 'Redeem';
            const currentRedeemed = parseInt(countDisplay.innerText);
            countDisplay.innerText = isRedeemed ? currentRedeemed + 1 : Math.max(0, currentRedeemed - 1);
            if (isRedeemed) launchFireworks(e.clientX || e.touches[0].clientX, e.clientY || e.touches[0].clientY);
        };

        coupons.forEach(coupon => {
            const card = document.createElement('div');
            card.className = 'coupon-card';
            card.innerHTML = `
                <div class="coupon-inner" onclick="this.classList.toggle('is-flipped')">
                    <div class="coupon-front">
                        <span class="text-6xl mb-4">${coupon.emoji}</span>
                        <h3 class="text-2xl font-bold text-slate-800 font-display">${coupon.title}</h3>
                        <p class="text-pink-500 mt-6 text-xs font-bold uppercase tracking-widest">Tap to Flip</p>
                    </div>
                    <div class="coupon-back text-center">
                        <p class="text-slate-700 font-medium text-[16px] mb-6 leading-relaxed px-2">${coupon.description}</p>
                        <button class="redeem-btn" onclick="handleRedeem(event, this)">
                            <span class="btn-text">Redeem</span>
                            <svg class="heart-icon" viewBox="0 0 24 24"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
                        </button>
                    </div>
                </div>`;
            grid.appendChild(card);
        });
    </script>
</body>
</html>
